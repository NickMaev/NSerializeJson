!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.NSerializeJson=e():r.NSerializeJson=e()}("undefined"!=typeof self?self:this,function(){return function(r){var e={};function t(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=r,t.c=e,t.d=function(r,e,n){t.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:n})},t.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,e){if(1&e&&(r=t(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var i in r)t.d(n,i,function(e){return r[e]}.bind(null,i));return n},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},t.p="",t(t.s=4)}([function(r,e,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=t(1),u=t(5),a=t(6),o=function(){function r(){}return r.parseValue=function(r,e,t,n){if(i.isStringNullOrEmpty(n))return this.parsers.filter(function(r){return"auto"===r.name})[0].parse(t,r.forceNullOnEmpty);var u=this.parsers.filter(function(r){return r.name===n})[0];if(null==u)throw a.pluginName+": couldn't find ther parser for type '"+n+"'.";return u.parse(t,r.forceNullOnEmpty)},r.serializeForm=function(r,e,t){var u=this;if(e=null==e?this.options:n({},this.options,e),null==t)t=this.parsers;else{if(!Array.isArray(t))throw Error("'parsers' arg in 'serializeForm' method must be an array or null.");t=n({},this.parsers,t)}var a=r.querySelectorAll("input, select, textarea"),o=i.nodeListToArray(a).filter(function(r){return!(r.disabled||"radio"===r.getAttribute("type")&&!r.checked||"checkbox"===r.getAttribute("type")&&!r.checked)}),s={};return o.forEach(function(r){return u.serializeIntoObject(e,t,s,r)}),s},r.serializeIntoObject=function(r,e,t,n){var u=null;if("select"===n.tagName.toLowerCase()){var o=Array.from(n.options).filter(function(r){return r.selected})[0];o&&(u=o.getAttribute("value"))}else u=n.value;var s=n.getAttribute("name");if(i.isStringNullOrEmpty(s))return t;var l=[],f=null,p=s.indexOf(":");if(p>-1){if("skip"===(f=s.substring(p+1,s.length)))return t;s=s.substring(0,p)}else f=n.getAttribute("data-value-type");null!=r.onBeforeParseValue&&(u=r.onBeforeParseValue(u,f));var c=this.parseValue(r,e,u,f);if(r.useDotSeparatorInPath){var y=!1;l=s.split(".");for(var m=0,d=0;d<l.length;d++){var g=l[d+m];if(void 0!==g){var h=g.indexOf("[]");if(-1===h){var v=g.indexOf("["),b=g.indexOf("]");if(-1!==v&&-1!==b){var S=g.slice(v+1,b);if(l[d+m]=g.replace("["+S+"]",""),!i.isStringNullOrEmpty(S)&&!i.isStringInteger(S))throw Error("Path '"+s+"' must be empty or contain a number in array brackets.");S&&l.splice(d+m+1,0,S),m++}}else if(d!==l.length-1){if(h>-1&&h!==l.length-1)throw a.pluginName+": error in path '"+s+"' empty values in the path mean array and should be at the end."}else h>-1&&(l[d+m]=g.replace("[]",""),y=!0)}}y&&l.push("")}else(l=s.split("[").map(function(r,e){return r.replace("]","")})).forEach(function(r,e){if(e!==l.length-1&&i.isStringNullOrEmpty(r))throw a.pluginName+": error in path '"+s+"' empty values in the path mean array and should be at the end."});return this.searchAndSet(r,t,l,0,c),t},r.searchAndSet=function(r,e,t,n,u,o){void 0===o&&(o=0);var s=t[n],l=n===t.length-1,f=t[n+1];if(null==e||"string"==typeof e)throw t=t.map(function(r){return i.isStringNullOrEmpty(r)?"[]":r}),console.log(a.pluginName+": there was an error in path '"+t+"' in step '"+s+"'."),a.pluginName+": error.";console.log("-----------------------");var p=i.isStringNullOrEmpty(s),c=i.isStringInteger(s),y=i.isStringInteger(f)||""==f;if(p){if(l)return void e.push(u);null==e[o]&&(e[o]={}),s=o,o++}else if(c&&r.useNumKeysAsArrayIndex){var m=parseInt(s);if(i.isArray(e)||(e=[]),l)return void(e[m]=u);null==e[m]&&(e[m]={})}else{if(l)return void(e[s]=u);r.useNumKeysAsArrayIndex&&y?i.isArray(e[s])||(e[s]=[]):null==e[s]&&(e[s]={})}n++,this.searchAndSet(r,e[s],t,n,u,o)},r.options={useNumKeysAsArrayIndex:!0,useDotSeparatorInPath:!1,forceNullOnEmpty:!1},r.parsers=u.parserList.slice(),r}();e.NSerializeJson=o},function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStringJsonObject=function(r){try{return JSON.parse(r),!0}catch(r){}return!1},e.isArray=function(r){return Array.isArray(r)},e.isStringNumber=function(r){return"number"==typeof r||/^[-+]?\d+([Ee][+-]?\d+)?(\.\d+)?$/.test(r)},e.isStringInteger=function(r){return/^[-+]?\d+([Ee][+-]?\d+)?$/.test(r)},e.isStringNullOrEmpty=function(r){return null==r||""===r.trim()},e.nodeListToArray=function(r){return Array.prototype.slice.call(r)}},function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(r,e,t){"use strict";t.r(e);var n=t(0);t.d(e,"NSerializeJson",function(){return n.NSerializeJson});var i=t(2);t.d(e,"IOptions",function(){return i.IOptions});var u=t(3);t.d(e,"IValueParser",function(){return u.IValueParser})},function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(1);e.parserList=[{name:"auto",parse:function(r,e){if(n.isStringNullOrEmpty(r))return e?null:r;var t=r.toString().trim();if("null"===t.toLowerCase())return null;try{return t=JSON.parse(t)}catch(r){}var i=t.split(",");return i.length>1&&(t=i.map(function(r){return n.isStringNumber(r)?parseFloat(r):n.isStringJsonObject(r)?JSON.parse(r):r.trim()})),t}},{name:"number",parse:function(r,e){return n.isStringNullOrEmpty(r)?e?null:0:n.isStringNumber(r)?parseFloat(r):0}},{name:"boolean",parse:function(r,e){return n.isStringNullOrEmpty(r)?!!e&&null:"true"===(r=r.toString().toLowerCase())||"1"===r}},{name:"string",parse:function(r,e){if(n.isStringNullOrEmpty(r))return null;var t=r.toString().trim();return"null"===t.toLowerCase()||""===t&&e?null:t}},{name:"array[auto]",parse:function(r,t){return n.isStringNullOrEmpty(r)?t?null:[]:r.split(",").map(function(r){return e.parserList.filter(function(r){return"auto"===r.name})[0].parse(r.trim(),t)})}},{name:"array[string]",parse:function(r,e){return n.isStringNullOrEmpty(r)?e?null:[]:r.split(",").map(function(r){return r.trim().toString()})}},{name:"array[number]",parse:function(r,e){return n.isStringNullOrEmpty(r)?e?null:[]:r.split(",").map(function(r){return parseFloat(r.trim())})}},{name:"json",parse:function(r,e){return n.isStringNullOrEmpty(r)?e?null:{}:JSON.parse(r)}}]},function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pluginName="NSerializeJson"}])});
//# sourceMappingURL=nserializejson.min.js.map