!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.NSerializeJson=e():r.NSerializeJson=e()}("undefined"!=typeof self?self:this,(function(){return function(r){var e={};function t(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=r,t.c=e,t.d=function(r,e,n){t.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:n})},t.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,e){if(1&e&&(r=t(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var i in r)t.d(n,i,function(e){return r[e]}.bind(null,i));return n},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},t.p="",t(t.s=4)}([function(r,e,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=t(1),u=t(5),a=t(6),o=function(){function r(){}return r.parseValue=function(r,e,t,n){if(i.isStringNullOrEmpty(n))return this.parsers.filter((function(r){return"auto"===r.name}))[0].parse(t,r.forceNullOnEmpty);var u=this.parsers.filter((function(r){return r.name===n}))[0];if(null==u)throw Error(a.pluginName+": couldn't find ther parser for type '"+n+"'.");return u.parse(t,r.forceNullOnEmpty)},r.serializeForm=function(r,e,t){var u=this;if(e=null==e?this.options:n({},this.options,e),null==t)t=this.parsers;else{if(!Array.isArray(t))throw Error(a.pluginName+": 'parsers' arg in 'serializeForm' method must be an array or null.");t=n({},this.parsers,t)}var o=r.querySelectorAll("input, select, textarea"),s=i.nodeListToArray(o).filter((function(r){return!(r.disabled||"radio"===r.getAttribute("type")&&!r.checked||"checkbox"===r.getAttribute("type")&&!r.checked)})),l={};return s.forEach((function(r){return u.serializeIntoObject(e,t,l,r)})),l},r.serializeIntoObject=function(r,e,t,n){var u=null,o=n.tagName.toLowerCase(),s=n.getAttribute("name"),l=!1;if("select"===o){var f=n;l=1==f.multiple;var p=Array.from(f.options).filter((function(r){return r.selected})).map((function(r){return r.getAttribute("value")}));p&&(u=p)}else u=n.value;if(i.isStringNullOrEmpty(s))return t;var c=null,y=s.indexOf(":");if(y>-1){if("skip"===(c=s.substring(y+1,s.length)))return t;s=s.substring(0,y)}else c=n.getAttribute("data-value-type");var m=[];null!=r.onBeforeParseValue&&(u=r.onBeforeParseValue(u,c));var d=this.parseValue(r,e,u,c);if(r.useDotSeparatorInPath){var g=!1;m=s.split(".");for(var h=0,v=0;v<m.length;v++){var b=m[v+h];if(void 0!==b){var S=b.indexOf("[]");if(S>-1){if(v!==m.length-1)throw a.pluginName+": error in path '"+s+"' empty values in the path mean array and should be at the end.";S>-1&&(m[v+h]=b.replace("[]",""),l||(g=!0))}else{var O=b.indexOf("["),N=b.indexOf("]");if(-1!==O&&-1!==N){var A=b.slice(O+1,N);if(m[v+h]=b.replace("["+A+"]",""),!i.isStringNullOrEmpty(A)&&!i.isStringInteger(A))throw Error("Path '"+s+"' must be empty or contain a number in array brackets.");A&&m.splice(v+h+1,0,A),h++}}}}g&&m.push("")}else(m=s.split("[").map((function(r,e){return r.replace("]","")}))).forEach((function(r,e){if(!(e===m.length-1)&&i.isStringNullOrEmpty(r))throw Error(a.pluginName+": error in path '"+s+"' empty values in the path mean array and should be at the end.")}));return this.searchAndSet(r,l,t,m,0,d),t},r.searchAndSet=function(r,e,t,n,u,o,s){void 0===s&&(s=0);var l=n[u];null==l&&(l=null);var f=!0;e?!r.useDotSeparatorInPath&&n.length>1&&i.isStringNullOrEmpty(l)&&(f=u===n.length-2):f=u===n.length-1;var p=n[u+1];if(null==t||"string"==typeof t)throw n=n.map((function(r){return i.isStringNullOrEmpty(r)?"[]":r})),Error(a.pluginName+": there was an error in path '"+n+"' in step '"+l+"'.");var c=i.isStringNullOrEmpty(l),y=i.isStringInteger(l),m=i.isStringInteger(p)||""==p;if(c){if(f)return e&&r.useDotSeparatorInPath,void(e||t.push(o));null==t[s]&&(t[s]={}),s++}else if(y&&r.useNumKeysAsArrayIndex){var d=parseInt(l);if(i.isArray(t)||(t=[]),f)return void(t[d]=o);null==t[d]&&(t[d]={})}else{if(f)return void(t[l]=o);r.useNumKeysAsArrayIndex&&m?i.isArray(t[l])||(t[l]=[]):null==t[l]&&(t[l]={})}u++,this.searchAndSet(r,e,t[l],n,u,o,s)},r.options={useNumKeysAsArrayIndex:!0,useDotSeparatorInPath:!1,forceNullOnEmpty:!1},r.parsers=u.parserList.slice(),r}();e.NSerializeJson=o},function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStringJsonObject=function(r){try{return JSON.parse(r),!0}catch(r){}return!1},e.isArray=function(r){return Array.isArray(r)},e.isStringNumber=function(r){return"number"==typeof r||/^[-+]?\d+([Ee][+-]?\d+)?(\.\d+)?$/.test(r)},e.isStringInteger=function(r){return/^[-+]?\d+([Ee][+-]?\d+)?$/.test(r)},e.isStringNullOrEmpty=function(r){return null==r||""===r.trim()},e.nodeListToArray=function(r){return Array.prototype.slice.call(r)}},function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(r,e,t){"use strict";t.r(e);var n=t(0);t.d(e,"NSerializeJson",(function(){return n.NSerializeJson}));var i=t(2);t.d(e,"IOptions",(function(){return i.IOptions}));var u=t(3);t.d(e,"IValueParser",(function(){return u.IValueParser}))},function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(1);e.parserList=[{name:"auto",parse:function(r,e){if(n.isArray(r))return r;if(n.isStringNullOrEmpty(r))return e?null:r;var t=r.toString().trim();if("null"===t.toLowerCase())return null;if(n.isStringNumber(r))return parseFloat(r);try{return t=JSON.parse(t)}catch(r){}return t}},{name:"number",parse:function(r,e){return n.isArray(r)?r.map((function(r){return parseInt(r)})):"number"==typeof r?r:n.isStringNullOrEmpty(r)?e?null:0:n.isStringNumber(r)?parseFloat(r):0}},{name:"boolean",parse:function(r,e){return n.isStringNullOrEmpty(r)?!!e&&null:"true"===(r=r.toString().toLowerCase())||"1"===r}},{name:"string",parse:function(r,e){if(n.isStringNullOrEmpty(r))return null;var t=r.toString().trim();return"null"===t.toLowerCase()||""===t&&e?null:t}},{name:"array[auto]",parse:function(r,t){return n.isStringNullOrEmpty(r)?t?null:[]:r.split(",").map((function(r){return e.parserList.filter((function(r){return"auto"===r.name}))[0].parse(r.trim(),t)}))}},{name:"array[string]",parse:function(r,e){return n.isStringNullOrEmpty(r)?e?null:[]:r.split(",").map((function(r){return r.trim().toString()}))}},{name:"array[number]",parse:function(r,e){return n.isStringNullOrEmpty(r)?e?null:[]:r.split(",").map((function(r){return parseFloat(r.trim())}))}},{name:"json",parse:function(r,e){return n.isStringNullOrEmpty(r)?e?null:{}:JSON.parse(r)}}]},function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pluginName="NSerializeJson"}])}));
//# sourceMappingURL=nserializejson.min.js.map